<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8"/>
<title>Week 2</title>
<meta name="author" content="(Evan Bretl)"/>
<style type="text/css">
.underline { text-decoration: underline; }
</style>
<link rel="stylesheet" href="https://robojackets.github.io/reveal.js/css/reveal.css"/>

<link rel="stylesheet" href="https://robojackets.github.io/reveal.js/css/theme/white.css" id="theme"/>


<!-- If the query includes 'print-pdf', include the PDF print sheet -->
<script>
    if( window.location.search.match( /print-pdf/gi ) ) {
        var link = document.createElement( 'link' );
        link.rel = 'stylesheet';
        link.type = 'text/css';
        link.href = 'https://robojackets.github.io/reveal.js/css/print/pdf.css';
        document.getElementsByTagName( 'head' )[0].appendChild( link );
    }
</script>
</head>
<body>
<div class="reveal">
<div class="slides">
<section id="sec-title-slide"><h1 class="title">Week 2</h1>
</section>

<section id="slide-orgb6d0fdb">
<h2 id="orgb6d0fdb">What are we doing today?</h2>
<ul>
<li>Introduction to C++
<ul>
<li>Functions</li>
<li>Headers and includes</li>
<li>Namespaces</li>
<li><code>auto</code> keyword</li>
<li>Working with strings</li>

</ul></li>
<li>Using the RJRobot API
<ul>
<li>Drive in a square</li>
<li>Line following</li>

</ul></li>

</ul>

</section>
<section id="slide-org0af7424">
<h2 id="org0af7424">What is C++?</h2>
<ul>
<li>Compiled (fast)</li>
<li>Can be written in many different ways (flexible)</li>
<li>Not merely "C with classes"</li>

</ul>

</section>
<section id="slide-orga681f93">
<h2 id="orga681f93">Starting notes</h2>
<ul>
<li>We assume some knowledge of basic of C/C++ syntax (if, for, while, datatypes, etc)
<ul>
<li>If you are lost today, there is a catch-up training session which will teach these things. Next Saturday 2-4</li>

</ul></li>

</ul>

</section>
<section id="slide-orgc19291c">
<h2 id="orgc19291c">hello-world.cpp</h2>
<ul>
<li>A simple C++ program, we will be explaining what's going on here and more</li>
<li>We will be using cpp.sh for live demos</li>

</ul>
<div class="org-src-container">

<pre  class="src src-C++"><span class="linenr">1: </span><span style="color: #598249;">#include</span> <span style="color: #15968D;">&lt;iostream&gt;</span>
<span class="linenr">2: </span>
<span class="linenr">3: </span><span style="color: #598249;">int</span> <span style="color: #2F7BDE;">main</span>() {
<span class="linenr">4: </span>  <span style="color: #15968D;">std</span>::cout &lt;&lt; <span style="color: #15968D;">"Hello, world!"</span> &lt;&lt; <span style="color: #15968D;">std</span>::endl;
<span class="linenr">5: </span>}
</pre>
</div>
<p>
<a href="http://cpp.sh/9yupt">Hello World live example</a>
</p>

</section>
<section id="slide-orgb20d45d">
<h2 id="orgb20d45d">Compiling and Running</h2>
<ul>
<li>Compiling turns C++ code into an executable program</li>
<li>g++ is a common C++ compiler</li>

</ul>
<pre  class="example">
g++ hello-world.cpp -o hello-world.out
./hello-world.out
</pre>

</section>
<section id="slide-org63b0927">
<h2 id="org63b0927">Functions in C++</h2>
<ul>
<li>Review: A function is a chunk of code with inputs and outputs</li>
<li>C++ functions have 0 or more parameters (inputs) and have 0 or 1 output</li>
<li>Each parameter has a type and there is a return type</li>
<li>The special function <code>main()</code> with return type <code>int</code> gets run automatically</li>
<li>Example
<ul>
<li>Want to add two integers, x and y, and print their result</li>

</ul></li>

</ul>

</section>
<section id="slide-org5d6084c">
<h2 id="org5d6084c">Making a Function</h2>
<ol>
<li>Informative function name</li>
<li>Input types</li>
<li>Return type (<code>void</code> means no return/output)</li>

</ol>
<div class="org-src-container">

<pre  class="src src-C++"><span class="linenr">1: </span><span style="color: #598249;">void</span> <span style="color: #2F7BDE;">addAndPrint</span>(<span style="color: #598249;">int</span> <span style="color: #2F7BDE;">x</span>, <span style="color: #598249;">int</span> <span style="color: #2F7BDE;">y</span>) {
<span class="linenr">2: </span>
<span class="linenr">3: </span>}
</pre>
</div>

</section>
<section id="slide-orgbafbb2b">
<h2 id="orgbafbb2b">Making a Function</h2>
<ul>
<li>Use the parameters to do something</li>

</ul>
<div class="org-src-container">

<pre  class="src src-C++"><span class="linenr">1: </span><span style="color: #598249;">void</span> <span style="color: #2F7BDE;">addAndPrint</span>(<span style="color: #598249;">int</span> <span style="color: #2F7BDE;">x</span>, <span style="color: #598249;">int</span> <span style="color: #2F7BDE;">y</span>) {
<span class="linenr">2: </span>    <span style="color: #598249;">int</span> <span style="color: #2F7BDE;">sum</span> = x + y;
<span class="linenr">3: </span>    <span style="color: #15968D;">std</span>::cout &lt;&lt; sum &lt;&lt; <span style="color: #15968D;">std</span>::endl;
<span class="linenr">4: </span>}
</pre>
</div>

</section>
<section id="slide-org965f88e">
<h2 id="org965f88e">Functions Example</h2>
<ul>
<li>We can split up this code to show you real return types</li>
<li><code>return</code> statement must be used since the return type is not <code>void</code> anymore</li>

</ul>
<div class="org-src-container">

<pre  class="src src-C++"><span class="linenr"> 1: </span><span style="color: #598249;">void</span> <span style="color: #2F7BDE;">addAndPrint</span>(<span style="color: #598249;">int</span> <span style="color: #2F7BDE;">x</span>, <span style="color: #598249;">int</span> <span style="color: #2F7BDE;">y</span>) {
<span class="linenr"> 2: </span>    <span style="color: #598249;">int</span> <span style="color: #2F7BDE;">sum</span> = x + y;
<span class="linenr"> 3: </span>    <span style="color: #15968D;">std</span>::cout &lt;&lt; sum &lt;&lt; <span style="color: #15968D;">std</span>::endl;
<span class="linenr"> 4: </span>}
<span class="linenr"> 5: </span>
<span class="linenr"> 6: </span><span style="color: #598249;">int</span> <span style="color: #2F7BDE;">add</span>(<span style="color: #598249;">int</span> <span style="color: #2F7BDE;">x</span>, <span style="color: #598249;">int</span> <span style="color: #2F7BDE;">y</span>) {
<span class="linenr"> 7: </span>    <span style="color: #598249;">return</span> x + y;
<span class="linenr"> 8: </span>}
<span class="linenr"> 9: </span>
<span class="linenr">10: </span><span style="color: #598249;">void</span> <span style="color: #2F7BDE;">print</span>(<span style="color: #598249;">int</span> <span style="color: #2F7BDE;">value</span>) {
<span class="linenr">11: </span>    <span style="color: #15968D;">std</span>::cout &lt;&lt; value &lt;&lt; <span style="color: #15968D;">std</span>::endl;
<span class="linenr">12: </span>}
</pre>
</div>
<ul>
<li><code>print(add(3, 4))</code> gives the same result as <code>addAndPrint(3, 4)</code></li>
<li><a href="http://cpp.sh/8skfr">Verify that this indeed works</a></li>

</ul>

</section>
<section id="slide-org3615229">
<h2 id="org3615229">Forward Declaration</h2>
<ul>
<li>Declaration = defining the name, parameters, and return type
<ul>
<li><code>int foo(int x);</code>  OR</li>
<li><code>int foo(int);</code></li>

</ul></li>
<li>Definition = declaration + filling in the function
<ul>
<li><code>int foo(int x) { return x+1; }</code></li>

</ul></li>
<li>If you forward-declare a function, you must do it higher up in the file than the definition</li>
<li><a href="http://cpp.sh/92su4m">Forward Declaration live example</a> &lt;- try removing the declaration</li>

</ul>

</section>
<section id="slide-org7bced59">
<h2 id="org7bced59">Overloading</h2>
<ul>
<li>Function signature = name + list of parameter types</li>
<li>Each function must have a unique signature. Names can be the same as long as the  parameters are different</li>

</ul>
<div class="org-src-container">

<pre  class="src src-C++"><span class="linenr">1: </span><span style="color: #5e6263;">// </span><span style="color: #5e6263;">these all have different signatures</span>
<span class="linenr">2: </span><span style="color: #598249;">int</span> <span style="color: #2F7BDE;">add</span>(<span style="color: #598249;">int</span>, <span style="color: #598249;">int</span>);
<span class="linenr">3: </span><span style="color: #598249;">int</span> <span style="color: #2F7BDE;">add</span>(<span style="color: #598249;">int</span>, <span style="color: #598249;">int</span>, <span style="color: #598249;">int</span>);
<span class="linenr">4: </span><span style="color: #598249;">double</span> <span style="color: #2F7BDE;">add</span>(<span style="color: #598249;">double</span>, <span style="color: #598249;">double</span>);
<span class="linenr">5: </span><span style="color: #598249;">double</span> <span style="color: #2F7BDE;">add</span>(<span style="color: #598249;">double</span>, <span style="color: #598249;">double</span>, <span style="color: #598249;">double</span>);
</pre>
</div>

</section>
<section id="slide-orgc4064a3">
<h2 id="orgc4064a3">Includes</h2>
<ul>
<li>Why do we need <code>#include &lt;iostream&gt;</code>?
<ul>
<li><a href="http://cpp.sh/7jb5t">Many things like std::cout don't exist unless you import them</a></li>

</ul></li>
<li>Includes let you bring other code into a file</li>
<li>Use this for
<ul>
<li>Standard library functions and data types (anything std::)</li>
<li>Other installed libraries (e.g. ROS, OpenCV, Qt)</li>
<li>Splitting up a large program into multiple files</li>

</ul></li>
<li>Without including anything, C++ is very limited</li>

</ul>

</section>
<section id="slide-org22c72d8">
<h2 id="org22c72d8">Include syntax</h2>
<ul>
<li><code>&lt;&gt;</code> gets code from the standard library or installed libraries</li>
<li><code>""</code> gets code from a nearby folder, or does the same thing as <code>&lt;&gt;</code> if it can't find anything</li>
<li>What's in the <code>&lt;&gt;</code> or <code>""</code> is a file name
<ul>
<li>Traditionally the file name has extension ".h" or ".hpp"</li>

</ul></li>
<li>Examples:</li>

</ul>
<div class="org-src-container">

<pre  class="src src-C++"><span class="linenr">1: </span><span style="color: #598249;">#include</span> <span style="color: #15968D;">&lt;string&gt;</span>  <span style="color: #5e6263;">// </span><span style="color: #5e6263;">standard library</span>
<span class="linenr">2: </span><span style="color: #598249;">#include</span> <span style="color: #15968D;">&lt;QWidget&gt;</span>  <span style="color: #5e6263;">// </span><span style="color: #5e6263;">file installed with Qt</span>
<span class="linenr">3: </span><span style="color: #598249;">#include</span> <span style="color: #15968D;">&lt;ros/ros.h&gt;</span>  <span style="color: #5e6263;">// </span><span style="color: #5e6263;">file installed with ROS</span>
<span class="linenr">4: </span><span style="color: #598249;">#include</span> <span style="color: #15968D;">"include/my_interface.hpp"</span>  <span style="color: #5e6263;">// </span><span style="color: #5e6263;">another file in the same project,</span>
<span class="linenr">5: </span>                                     <span style="color: #5e6263;">// </span><span style="color: #5e6263;">in a folder called "include</span><span style="color: #bd3832; font-weight: bold;">"</span>
</pre>
</div>

</section>
<section id="slide-org586da72">
<h2 id="org586da72">Namespaces</h2>
<ul>
<li>What happens when two things are assigned the same name (or the same function signature)?
<ul>
<li><a href="http://cpp.sh/24v43">You get an error</a></li>

</ul></li>
<li>Solution: protect your variables and function names with a unique namespace
<ul>
<li><a href="http://cpp.sh/66mrj">Same program, but with namespaces</a></li>
<li>Use keywords from a namespace using the <code>::</code> operator
<ul>
<li>types: <code>std::string</code>, <code>my_library::MyClass</code></li>
<li>functions: <code>std::min_element</code></li>
<li>static variables: <code>std::string::npos</code></li>

</ul></li>

</ul></li>
<li>Best practice: everything you write that is included should be in a namespace</li>

</ul>

</section>
<section id="slide-org9bcaea2">
<h2 id="org9bcaea2">"using namespace" keyword</h2>
<ul>
<li><a href="http://cpp.sh/4d5gz">Hello world, but using std namespace</a></li>
<li>Handy but also defeats the purpose of namespaces</li>
<li>Use with caution
<ul>
<li>Must be clear, without the namespace, where the function comes from</li>
<li>In general, use only one external namespace in a file (usually std)</li>

</ul></li>

</ul>

</section>
<section id="slide-orge9ff5a8">
<h2 id="orge9ff5a8">"Auto" Keyword</h2>
<ul>
<li>C++ can figure out for you what type something should be</li>
<li>Function <code>MakeObject()</code> returns some data of a particular type</li>

</ul>
<div class="org-src-container">

<pre  class="src src-C++"><span style="color: #598249;">namespace</span>::<span style="color: #15968D;">MyVeryLongDataTypeName</span> <span style="color: #2F7BDE;">data</span> = MakeObject();
</pre>
</div>
<p>
OR
</p>
<div class="org-src-container">

<pre  class="src src-C++"><span style="color: #598249;">auto</span> <span style="color: #2F7BDE;">data</span> = MakeObject();
</pre>
</div>
<p>
This can make your code easier or harder to read/maintain, depending on whether you name your variables well
</p>

</section>
<section id="slide-org19c6c65">
<h2 id="org19c6c65">Strings</h2>
<ul>
<li>C string (still valid in C++):</li>

</ul>
<div class="org-src-container">

<pre  class="src src-C++"><span class="linenr">1: </span><span style="color: #598249;">char</span>[] s = <span style="color: #15968D;">"this is a string"</span>;
</pre>
</div>
<ul>
<li>C++ string:</li>

</ul>
<div class="org-src-container">

<pre  class="src src-C++"><span class="linenr">1: </span><span style="color: #598249;">#include</span> <span style="color: #15968D;">&lt;string&gt;</span>
<span class="linenr">2: </span><span style="color: #15968D;">std</span>::<span style="color: #598249;">string</span> <span style="color: #2F7BDE;">s1</span>(<span style="color: #15968D;">"this is a string"</span>);  <span style="color: #5e6263;">// </span><span style="color: #5e6263;">constructor</span>
<span class="linenr">3: </span><span style="color: #15968D;">std</span>::<span style="color: #598249;">string</span> <span style="color: #2F7BDE;">s2</span> = <span style="color: #15968D;">"this is a string"</span>;  <span style="color: #5e6263;">// </span><span style="color: #5e6263;">same effect as constructor</span>
</pre>
</div>
<ul>
<li>C++ strings are classes and have methods (like Java, unlike C)</li>

</ul>

</section>
<section id="slide-orgfd6d175">
<h2 id="orgfd6d175">String Methods</h2>
<ul>
<li>What methods can I use for a string? (there are lots)
<ul>
<li><a href="https://en.cppreference.com/w/cpp/string/basic_string">Online documentation!</a></li>
<li>cppreference.com is a very good resource</li>

</ul></li>
<li>Adding to end:  + and += operators, <code>append(string)</code>, <code>push_back(char)</code>
<ul>
<li><a href="http://cpp.sh/84u76">Adding to string example</a></li>

</ul></li>
<li>Reading user input:  <code>std::cin &gt;&gt;</code>
<ul>
<li><a href="http://cpp.sh/64mc">Reading user input example</a></li>

</ul></li>
<li>Access characters like an array
<ul>
<li><a href="http://cpp.sh/9gb4x">Access chars example</a></li>

</ul></li>
<li><code>size()</code> and <code>length()</code> each get number of characters</li>

</ul>

</section>
<section id="slide-org092e379">
<h2 id="org092e379">Exercise 1</h2>
<ul>
<li>Find a buddy (or work alone if you want)</li>
<li>Write a function <code>make_palindrome</code>
<ul>
<li>Input: string</li>
<li>Output: string with reversed copy attached</li>
<li><code>make_palindrome("apple")</code> returns <code>"appleelppa"</code></li>

</ul></li>
<li>Starter code: <a href="http://cpp.sh/844tx">http://cpp.sh/844tx</a></li>

</ul>

</section>
<section id="slide-orgeb14fad">
<h2 id="orgeb14fad">Solution</h2>
<ul>
<li>Using what we've learned so far
<ul>
<li><a href="http://cpp.sh/92y54">http://cpp.sh/92y54</a></li>

</ul></li>
<li>Using Standard Template Library (next week's topic)
<ul>
<li><a href="http://cpp.sh/7jmjg">http://cpp.sh/7jmjg</a></li>

</ul></li>

</ul>

</section>
<section id="slide-org88081c4">
<h2 id="org88081c4">Our Training Robots</h2>
<ul>
<li>We have robots for you to use!</li>
<li>Your code runs on your laptop, sending commands via wifi to the robot</li>
<li>Sensors
<ul>
<li>2 line</li>
<li>1 color</li>
<li>1 ultrasonic</li>
<li>hand proximity / gesture</li>

</ul></li>

</ul>

</section>
<section id="slide-org29bc651">
<h2 id="org29bc651">RJRobot API</h2>
<div class="org-src-container">

<pre  class="src src-C++"><span class="linenr">1: </span><span style="color: #598249;">RJRobot</span> <span style="color: #2F7BDE;">robot</span>(REAL);  <span style="color: #5e6263;">// </span><span style="color: #5e6263;">Make a new robot. Simulation may come later</span>
<span class="linenr">2: </span>robot.SetDriveMotors(200, -200);  <span style="color: #5e6263;">//</span><span style="color: #5e6263;">-255 to 255 range on motors</span>
<span class="linenr">3: </span>robot.SetLiftMotor(127);
<span class="linenr">4: </span>robot.Wait(1000ms);
<span class="linenr">5: </span>robot.StopMotors();
<span class="linenr">6: </span><span style="color: #598249;">int</span> <span style="color: #2F7BDE;">line_brightness</span> = robot.GetLineValue(<span style="color: #15968D;">LightSensor</span>::CENTER);  <span style="color: #5e6263;">// </span><span style="color: #5e6263;">downwards line sensor</span>
<span class="linenr">7: </span><span style="color: #598249;">double</span> <span style="color: #2F7BDE;">clearance</span> = robot.GetUltrasonicDistance();  <span style="color: #5e6263;">// </span><span style="color: #5e6263;">forwards ultrasonic sensor</span>
<span class="linenr">8: </span><span style="color: #598249;">Color</span> <span style="color: #2F7BDE;">ball_color</span> = robot.GetColor();  <span style="color: #5e6263;">// </span><span style="color: #5e6263;">forwards color sensor. RED, BLUE, or UNKNOWN</span>
</pre>
</div>
<p>
Full interface defined in <a href="https://github.com/RoboJackets/stsl/blob/master/include/STSL/RJRobot.h">RJRobot.h</a>. Use code completion in CLion as well.
</p>

</section>
<section id="slide-orga6c63b8">
<h2 id="orga6c63b8">Connecting to the Robot</h2>
<ul>
<li>Make sure you have the software-training repo cloned</li>
<li>Open CLion</li>
<li>Open the existing project <code>software-training/hardware_applications</code></li>
<li>In the Build Configuration menu in the top-right of CLion, select the program you want to run (e.g. <code>spin_in_place</code>)</li>
<li>Hit the build button (hammer), make sure everything compiles</li>
<li>Connect to your robot's wifi network</li>
<li>Hit the build and run button (green arrow)</li>
<li>Hit the red square button to stop the robot</li>

</ul>

</section>
<section id="slide-org9bb258c">
<h2 id="org9bb258c">Today's robot challenges</h2>
<ul>
<li>Drive in a square
<ul>
<li>modify code in <code>drive_in_square</code> folder</li>
<li>Use a combination of SetDriveMotors, Wait, and StopMotors to drive in a square</li>
<li>You should use a for loop</li>

</ul></li>
<li>Line Following
<ul>
<li>Basic algorithm: if black, turn forward-left, else turn forward-right</li>
<li>Implement a better way if you want</li>

</ul></li>

</ul>

</section>
<section id="slide-orgd594812">
<h2 id="orgd594812">Supplemental Challenge 1: "FizzBuzz"</h2>
<ul>
<li>Print numbers 1 to n, except:
<ul>
<li>If the number is a multiple of 3, print "fizz" instead of the number</li>
<li>If the number is a multiple of 5, print "buzz" instead of the number</li>
<li>If the number is a multiple of both 3 and 5, print "fizzbuzz" instead</li>

</ul></li>
<li>Example output (n = 8): <code>1 2 fizz 4 buzz fizz 7 8</code></li>
<li>Starter code: <a href="http://cpp.sh/8xuu">http://cpp.sh/8xuu</a></li>

</ul>

</section>
<section id="slide-org4db480d">
<h2 id="org4db480d">Supplemental Challenge 2: Merge Strings</h2>
<ul>
<li>Given two strings s1 and s2, return the string that has elements of s1 and s2 interweaved</li>
<li>"abc", "12345" -&gt; "a1b2c345"</li>
<li>Hint: <code>&lt;algorithm&gt;</code> header contains <code>min</code> and <code>max</code> functions
<ul>
<li><code>max(4,7) -&gt; 7</code></li>

</ul></li>
<li>Starter code: <a href="http://cpp.sh/4z5as">http://cpp.sh/4z5as</a></li>

</ul>

</section>
<section id="slide-org4379ade">
<h2 id="org4379ade">Supplemental Challenge Solutions</h2>
<ul>
<li>FizzBuzz <a href="http://cpp.sh/7zrsc">http://cpp.sh/7zrsc</a></li>
<li>Merge Strings <a href="http://cpp.sh/2h4eg">http://cpp.sh/2h4eg</a></li>
<li>There are many ways to solve each of these</li>

</ul>
</section>
</section>
</div>
</div>
<script src="https://robojackets.github.io/reveal.js/lib/js/head.min.js"></script>
<script src="https://robojackets.github.io/reveal.js/js/reveal.js"></script>

<script>
// Full list of configuration options available here:
// https://github.com/hakimel/reveal.js#configuration
Reveal.initialize({

controls: false,
progress: true,
history: false,
center: true,
slideNumber: 'c',
rollingLinks: false,
keyboard: true,
overview: true,
width: 1440,
height: 800,
margin: 0.15,

theme: Reveal.getQueryHash().theme, // available themes are in /css/theme
transition: Reveal.getQueryHash().transition || 'None', // default/cube/page/concave/zoom/linear/fade/none
transitionSpeed: 'fast',
multiplex: {
    secret: '', // null if client
    id: '', // id, obtained from socket.io server
    url: '' // Location of socket.io server
},

// Optional libraries used to extend on reveal.js
dependencies: [
 { src: 'https://robojackets.github.io/reveal.js/plugin/notes/notes.js', async: true, condition: function() { return !!document.body.classList; } },
]
});
</script>
</body>
</html>
