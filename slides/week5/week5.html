<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8"/>
<title>Week 5</title>
<meta name="author" content="(Kristaps Berzinch, Raymond Ortiz, Evan Bretl)"/>
<style type="text/css">
.underline { text-decoration: underline; }
</style>
<link rel="stylesheet" href="https://robojackets.github.io/reveal.js/css/reveal.css"/>

<link rel="stylesheet" href="https://robojackets.github.io/reveal.js/css/theme/white.css" id="theme"/>


<!-- If the query includes 'print-pdf', include the PDF print sheet -->
<script>
    if( window.location.search.match( /print-pdf/gi ) ) {
        var link = document.createElement( 'link' );
        link.rel = 'stylesheet';
        link.type = 'text/css';
        link.href = 'https://robojackets.github.io/reveal.js/css/print/pdf.css';
        document.getElementsByTagName( 'head' )[0].appendChild( link );
    }
</script>
</head>
<body>
<div class="reveal">
<div class="slides">
<section id="sec-title-slide"><h1 class="title">Week 5</h1>
</section>

<section id="slide-org8b054c1">
<h2 id="org8b054c1">What are we doing today?</h2>
<ul>
<li>Classes in C++</li>
<li>Inheritance and polymorphism</li>

</ul>

</section>
<section id="slide-orgf621de6">
<h2 id="orgf621de6">What are classes?</h2>
<ul>
<li>Definitions for objects, i.e. what data and methods they have
<ul>
<li>In other words, a blueprint for how to create an object</li>

</ul></li>
<li>An object is called an <b>instance</b> of a class
<ul>
<li>An object has all the functions and data structures defined in its class</li>
<li>Data schema is the same across all instances of a class, but values differ</li>
<li>A method can treat all instances of an object the same
<ul>
<li>Think of it like a complex, user defined variable type</li>

</ul></li>

</ul></li>

</ul>

</section>
<section id="slide-org741ed3e">
<h3 id="org741ed3e">Structure</h3>
<aside class="notes">
<p>
talk about the structure of a class
</p>

</aside>
<ul>
<li>Typically declaration in a .h file with implementation in a cpp file
<ul>
<li>This is not a strict rule</li>

</ul></li>

</ul>
<div class="org-src-container">

<pre  class="src src-c++"><span style="color: #598249;">class</span> <span style="color: #598249;">Example</span> {
    <span style="color: #5e6263;">// </span><span style="color: #5e6263;">declaration of variables</span>
    <span style="color: #5e6263;">// </span><span style="color: #5e6263;">method prototypes</span>
    <span style="color: #5e6263;">//   </span><span style="color: #5e6263;">can be declared in this file or a seperate cpp file</span>
    <span style="color: #598249;">void</span> <span style="color: #2F7BDE;">DoThing</span>(<span style="color: #598249;">int</span>);
};
<span style="color: #15968D;">Example</span>::<span style="color: #2F7BDE;">DoThing</span>(<span style="color: #598249;">int</span> <span style="color: #2F7BDE;">x</span>) {
    <span style="color: #5e6263;">// </span><span style="color: #5e6263;">... implementation of the function</span>
}
</pre>
</div>
<p>
<a href="https://ideone.com/jaRQsF">Example</a>
</p>

</section>
<section id="slide-orgea197ac">
<h2 id="orgea197ac">Why bother?</h2>
<ul>
<li>Software projects are easier to understand when related data and functions are grouped together</li>
<li>Abstracting data behind getters/setters allows you to validate inputs from other parts of your application</li>
<li>Abstracting complex tasks into class methods enables simpler, easier to read high-level code</li>
<li>Classes can be extended to add functionality with minimal extra code using inheritance</li>

</ul>

</section>
<section id="slide-orgaf5ee9c">
<h2 id="orgaf5ee9c">Scope</h2>
<aside class="notes">
<p>
Make sure to explain the different reason for not giving everything public scope
</p>

</aside>
<ul>
<li>Data and methods can have their scope set in order to have limited availability
<ul>
<li>Prevents unverified values from being inserted in class variables
<ul>
<li>Can force using getters and setters to interact with data</li>

</ul></li>
<li>Hides the internals of your classes</li>

</ul></li>

</ul>

</section>
<section id="slide-org1050613">
<h3 id="org1050613">public</h3>
<ul>
<li>Accessible by everyone</li>

</ul>
<div class="org-src-container">

<pre  class="src src-c++"><span style="color: #598249;">class</span> <span style="color: #598249;">Example</span> {
<span style="color: #598249;">public</span>:
    <span style="color: #598249;">int</span> <span style="color: #2F7BDE;">var</span>;
    <span style="color: #598249;">void</span> <span style="color: #2F7BDE;">do_something</span>() {<span style="color: #15968D;">std</span>::cout &lt;&lt; <span style="color: #15968D;">"doing something"</span> &lt;&lt; <span style="color: #15968D;">std</span>::endl;}
};
</pre>
</div>
<p>
<a href="https://ideone.com/2pacF2">Run It</a>
</p>

</section>
<section id="slide-org4d13288">
<h3 id="org4d13288">private</h3>
<aside class="notes">
<p>
try to use the private method and then show them the compiler error. Show an exaple of using the var in the class
</p>

</aside>
<ul>
<li>Data and methods are only accessible from within the class itself
<ul>
<li>Forces using setters and getters as an abstraction layer</li>

</ul></li>
<li>implied if no scope is initially set in a class</li>

</ul>
<div class="org-src-container">

<pre  class="src src-c++"><span style="color: #598249;">class</span> <span style="color: #598249;">Example</span> {
<span style="color: #598249;">private</span>:
    <span style="color: #598249;">int</span> <span style="color: #2F7BDE;">var</span>;
    <span style="color: #598249;">void</span> <span style="color: #2F7BDE;">do_something</span>() {<span style="color: #15968D;">std</span>::cout &lt;&lt; <span style="color: #15968D;">"doing something"</span> &lt;&lt; <span style="color: #15968D;">std</span>::endl;}
};
</pre>
</div>
<div class="org-src-container">

<pre  class="src src-c++"><span style="color: #598249;">class</span> <span style="color: #598249;">Example</span> {
    <span style="color: #598249;">int</span> <span style="color: #2F7BDE;">var</span>;
    <span style="color: #598249;">void</span> <span style="color: #2F7BDE;">do_something</span>() {<span style="color: #15968D;">std</span>::cout &lt;&lt; <span style="color: #15968D;">"doing something"</span> &lt;&lt; <span style="color: #15968D;">std</span>::endl;}
};
</pre>
</div>
<p>
<a href="https://ideone.com/huMvVg">Run It</a>
</p>

</section>
<section id="slide-org7008709">
<h3 id="org7008709">review</h3>
<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="org-left" />

<col  class="org-left" />

<col  class="org-left" />
</colgroup>
<thead>
<tr>
<th scope="col" class="org-left">Scope Type</th>
<th scope="col" class="org-left">Accessible inside the class</th>
<th scope="col" class="org-left">Accessible outside the class directly</th>
</tr>
</thead>
<tbody>
<tr>
<td class="org-left">private</td>
<td class="org-left">Yes</td>
<td class="org-left">No</td>
</tr>

<tr>
<td class="org-left">public</td>
<td class="org-left">Yes</td>
<td class="org-left">Yes</td>
</tr>
</tbody>
</table>

</section>
<section id="slide-org629fecf">
<h2 id="org629fecf">A simple example</h2>
<aside class="notes">
<p>
A class can have some data and some methods, which can either be public or private. Drop to a terminal and use/modify this class.
</p>

</aside>
<div class="org-src-container">

<pre  class="src src-c++"><span style="color: #598249;">class</span> <span style="color: #598249;">Example</span> {
    <span style="color: #598249;">private</span>:         <span style="color: #5e6263;">// </span><span style="color: #5e6263;">private is also implied if you don't specify visibility</span>
        <span style="color: #598249;">int</span> <span style="color: #2F7BDE;">a</span>;
    <span style="color: #598249;">public</span>:
        <span style="color: #598249;">int</span> <span style="color: #2F7BDE;">getA</span>() { <span style="color: #598249;">return</span> a; }
};
</pre>
</div>
<p>
<a href="https://ideone.com/eUhSw6">Run It</a>
</p>

</section>
<section id="slide-org90a0357">
<h2 id="org90a0357">Constructors and Destructors</h2>
<aside class="notes">
<p>
DO NOT go into why some constructors might be private.
</p>

</aside>
<ul>
<li>Often there are things that are required to create or destroy an instance of a class</li>
<li>We put the construction code in constructors</li>
<li>We put the destruction code in destructors</li>
<li>Usually public, scope still applies to these methods</li>

</ul>

</section>
<section id="slide-org0aeeb68">
<h3 id="org0aeeb68">Constructors</h3>
<aside class="notes">
<p>
use this version of the class
</p>

</aside>
<ul>
<li>Called whenever an object is created</li>
<li>Can have multiple constructors as long as they have different argument lists</li>
<li>Contains all of the code to create and initialize all of an object's members</li>
<li><code>default</code> constructors initialize all data members to default values (default constructor is used if no custom constructor is given)</li>

</ul>
<div class="org-src-container">

<pre  class="src src-c++"><span style="color: #598249;">class</span> <span style="color: #598249;">Example</span> {
    <span style="color: #598249;">private</span>:
        <span style="color: #598249;">int</span> <span style="color: #2F7BDE;">a</span>;
        <span style="color: #5e6263;">// </span><span style="color: #5e6263;">lots of important variables that live on the heap</span>
    <span style="color: #598249;">public</span>:
        <span style="color: #598249;">int</span> <span style="color: #2F7BDE;">getA</span>() { <span style="color: #598249;">return</span> a; }
        <span style="color: #2F7BDE;">Example</span>() = <span style="color: #598249;">default</span>;
        <span style="color: #2F7BDE;">Example</span>(<span style="color: #598249;">int</span> <span style="color: #2F7BDE;">a_local</span>) {
            a = a_local;
            <span style="color: #15968D;">std</span>::cout &lt;&lt; <span style="color: #15968D;">"custom constructor"</span> &lt;&lt; <span style="color: #15968D;">std</span>::endl;
            <span style="color: #5e6263;">/* </span><span style="color: #5e6263;">allocating memory, etc. ... */</span>
        }
};
</pre>
</div>
<p>
<a href="https://ideone.com/5y5iAk">Run It</a>
</p>

</section>
<section id="slide-org3dabfe4">
<h3 id="org3dabfe4">Destructors</h3>
<aside class="notes">
<p>
use this version of the class. Make sure to destruct the object
</p>

</aside>
<ul>
<li>This is always a no argument method</li>
<li>Contains all of the code to destory and deallocate all an objects members</li>
<li>Can only have one destructor</li>

</ul>
<div class="org-src-container">

<pre  class="src src-c++"><span style="color: #598249;">class</span> <span style="color: #598249;">Example</span> {
    <span style="color: #598249;">private</span>:
        <span style="color: #598249;">int</span> <span style="color: #2F7BDE;">a</span>;
        <span style="color: #5e6263;">// </span><span style="color: #5e6263;">lots of important variables from the heap</span>
    <span style="color: #598249;">public</span>:
        <span style="color: #598249;">int</span> <span style="color: #2F7BDE;">getA</span>() { <span style="color: #598249;">return</span> a; }
        <span style="color: #5e6263;">// </span><span style="color: #5e6263;">... constructors</span>
        ~<span style="color: #2F7BDE;">Example</span>() {<span style="color: #5e6263;">/* </span><span style="color: #5e6263;">lots of deletes */</span>};
};
</pre>
</div>
<p>
<a href="https://ideone.com/NBki2a">Run It</a>
</p>

</section>
<section id="slide-org192a84d">
<h2 id="org192a84d">Static members</h2>
<aside class="notes">
<p>
Drop to a terminal and use this class.
</p>

</aside>
<ul>
<li>For when you want data or functions to be part of your class, but they don't need to be "attached" to an instance of the class</li>
<li>Static data is shared between all instances of a class</li>
<li>Remember the <code>static</code> keyword means something else outside of class definitions!</li>
<li>Static variables must be initialized before use
<ul>
<li>accessed by the <b>::</b> operator</li>

</ul></li>

</ul>
<div class="org-src-container">

<pre  class="src src-c++"><span style="color: #598249;">class</span> <span style="color: #598249;">StaticExample</span> {
    <span style="color: #598249;">private</span>:
        <span style="color: #598249;">static</span> <span style="color: #598249;">int</span> <span style="color: #2F7BDE;">a</span>;
    <span style="color: #598249;">public</span>:
        <span style="color: #598249;">void</span> <span style="color: #2F7BDE;">modify_static_var</span>() { a++; }
        <span style="color: #598249;">static</span> <span style="color: #598249;">int</span> <span style="color: #2F7BDE;">getA</span>() { <span style="color: #598249;">return</span> a; }
};
<span style="color: #5e6263;">// </span><span style="color: #5e6263;">init in implementing class</span>
<span style="color: #598249;">int</span> <span style="color: #15968D;">static_example</span>::<span style="color: #2F7BDE;">a</span> = 0;
</pre>
</div>
<p>
<a href="https://ideone.com/LiGymG">live demo of static</a>
</p>

</section>
<section id="slide-orgca9b4e2">
<h2 id="orgca9b4e2">Inheritance</h2>
<aside class="notes">
<p>
pull up the two classes we have written so far and use the methods of the subclass under different circumstances
</p>

</aside>
<ul>
<li>Classes can inherit data and methods from other classes</li>
<li>Inheritance is an "is" relationship</li>

</ul>

<div class="figure">
<p><img src="https://i.imgur.com/9cF7NTq.png" alt="9cF7NTq.png" width="50%" />
</p>
</div>

</section>
<section id="slide-org22e49a0">
<h3 id="org22e49a0">Inheritance Example</h3>
<div class="org-src-container">

<pre  class="src src-c++"><span style="color: #598249;">class</span> <span style="color: #598249;">Child</span>: <span style="color: #598249;">public</span> <span style="color: #598249;">Example</span> {
    <span style="color: #5e6263;">// </span><span style="color: #5e6263;">we get `a` and `getA()` from example</span>
    <span style="color: #598249;">private</span>:
        <span style="color: #598249;">int</span> <span style="color: #2F7BDE;">b</span>;
    <span style="color: #598249;">public</span>:
        <span style="color: #598249;">int</span> <span style="color: #2F7BDE;">getB</span>() { <span style="color: #598249;">return</span> b; }
        <span style="color: #598249;">int</span> <span style="color: #2F7BDE;">getAplusB</span>() { <span style="color: #598249;">return</span> getA() + b; } <span style="color: #5e6263;">// </span><span style="color: #5e6263;">we can't use `a` directly since it's private</span>
};
</pre>
</div>

</section>
<section id="slide-org68ddfe4">
<h2 id="org68ddfe4">Scope and inheritence</h2>
<aside class="notes">
<p>
make sure to explain every bullet
</p>

</aside>
<ul>
<li>Scope applies across subclasses</li>

</ul>
<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="org-left" />

<col  class="org-left" />

<col  class="org-left" />

<col  class="org-left" />
</colgroup>
<thead>
<tr>
<th scope="col" class="org-left">scope</th>
<th scope="col" class="org-left">internally</th>
<th scope="col" class="org-left">subclasses</th>
<th scope="col" class="org-left">externally</th>
</tr>
</thead>
<tbody>
<tr>
<td class="org-left">private</td>
<td class="org-left">yes</td>
<td class="org-left">no</td>
<td class="org-left">no</td>
</tr>

<tr>
<td class="org-left">protected</td>
<td class="org-left">yes</td>
<td class="org-left">yes</td>
<td class="org-left">no</td>
</tr>

<tr>
<td class="org-left">public</td>
<td class="org-left">yes</td>
<td class="org-left">yes</td>
<td class="org-left">yes</td>
</tr>
</tbody>
</table>

</section>
<section id="slide-orgf57ba40">
<h3 id="orgf57ba40">Inheritance and constructor chaining</h3>
<ul>
<li>The constructor of the parent class is called before the constructor of the child class</li>
<li>Passing parameters to the parent constructor
<ul>
<li>Place <code>: Parent(args)</code> before the opening brace</li>

</ul></li>

</ul>
<div class="org-src-container">

<pre  class="src src-c++"><span style="color: #598249;">class</span> <span style="color: #598249;">Example</span> {
<span style="color: #598249;">public</span>:
    <span style="color: #598249;">int</span> <span style="color: #2F7BDE;">a</span>;
    <span style="color: #2F7BDE;">Example</span>(<span style="color: #598249;">int</span> <span style="color: #2F7BDE;">a2</span>) { a = a2; }
};
<span style="color: #598249;">class</span> <span style="color: #598249;">Child</span>: <span style="color: #598249;">public</span> <span style="color: #598249;">Example</span> {
<span style="color: #598249;">public</span>:
    <span style="color: #598249;">int</span> <span style="color: #2F7BDE;">b</span>;
    <span style="color: #2F7BDE;">Child</span>(<span style="color: #598249;">int</span> <span style="color: #2F7BDE;">a2</span>, <span style="color: #598249;">int</span> <span style="color: #2F7BDE;">b2</span>) : Example(a2) {
        b = b2;
    }
};
</pre>
</div>

</section>
<section id="slide-orga86bd62">
<h2 id="orga86bd62">Polymorphism</h2>
<aside class="notes">
<p>
explain how dynamic cast is used to change what an object is
</p>

</aside>
<ul>
<li>Now we can create <code>child</code> objects with all the properties of an <code>example</code> object</li>
<li><p>
This means we can safely cast a <code>child</code> object to an <code>example</code> object
</p>
<div class="org-src-container">

<pre  class="src src-c++"><span style="color: #598249;">child</span> <span style="color: #2F7BDE;">c</span>;
<span style="color: #598249;">example</span>&amp; <span style="color: #2F7BDE;">e</span> = <span style="color: #598249;">dynamic_cast</span>&lt;<span style="color: #598249;">example</span>&amp;&gt;(c);
</pre>
</div></li>
<li><p>
But not the other way around
</p>
<div class="org-src-container">

<pre  class="src src-c++"><span style="color: #598249;">example</span> <span style="color: #2F7BDE;">e</span>;
<span style="color: #598249;">child</span>&amp; <span style="color: #2F7BDE;">c</span> = <span style="color: #598249;">dynamic_cast</span>&lt;<span style="color: #598249;">child</span>&amp;&gt;(e);
</pre>
</div>
<pre  class="example">
example.cpp: In function ‘int main()’:
example.cpp:20:38: error: cannot dynamic_cast ‘e’ (of type ‘class Example’) to type
‘class child&amp;’ (source type is not polymorphic)
     child&amp; c = dynamic_cast&lt;child&amp;&gt;(e);
				     ^
</pre></li>

</ul>
<p>
<a href="https://ideone.com/ETJ0uh">Polymorphism Example</a>
</p>

</section>
<section id="slide-orgc771f0f">
<h2 id="orgc771f0f">Virtual functions</h2>
<aside class="notes">
<p>
Show an example using the classes defined in the example code and explained earlier
</p>

</aside>
<ul>
<li>A parent class can specify that certain functions are <b>virtual</b></li>
<li>Child classes can then implement their own versions of the function</li>
<li>The child implementation will be called even from a reference of the type of the parent
<ul>
<li>If the function isn't marked virtual, which implementation is called depends on the type of the reference</li>

</ul></li>

</ul>
<p>
<a href="https://ideone.com/iFqp7I">Run It</a>
</p>

</section>
<section id="slide-org17fa9d0">
<h3 id="org17fa9d0">Exercise: RJ Robot Extended to drive in square</h3>
<ul>
<li>Starter code in <code>hardware_applications/inheritance</code> folder</li>
<li>File <code>inheritance.cpp</code> is already complete</li>
<li>Your <code>RJRobotExtended</code> class should have the following:
<ul>
<li>Be a subclass of RJRobot</li>
<li>Have a private data member <code>duration</code> for an amount of time to drive on the edge of the square
<ul>
<li>This is a <code>std::chrono::milliseconds</code> type</li>
<li>You should have a constructor argument for this</li>

</ul></li>
<li>private methods
<ul>
<li><code>DriveEdge()</code>: drive forward for <code>duration</code> milliseconds</li>
<li><code>DriveCorner()</code>: turn 90 degrees right</li>

</ul></li>
<li>public methods:
<ul>
<li><code>DriveInSquare()</code>: drive in a square, calling your private</li>

</ul></li>

</ul></li>

</ul>
</section>
</section>
</div>
</div>
<script src="https://robojackets.github.io/reveal.js/lib/js/head.min.js"></script>
<script src="https://robojackets.github.io/reveal.js/js/reveal.js"></script>

<script>
// Full list of configuration options available here:
// https://github.com/hakimel/reveal.js#configuration
Reveal.initialize({

controls: false,
progress: true,
history: false,
center: true,
slideNumber: 'c',
rollingLinks: false,
keyboard: true,
overview: true,
width: 1440,
height: 800,
margin: 0.15,

theme: Reveal.getQueryHash().theme, // available themes are in /css/theme
transition: Reveal.getQueryHash().transition || 'linear', // default/cube/page/concave/zoom/linear/fade/none
transitionSpeed: 'fast',
multiplex: {
    secret: '', // null if client
    id: '', // id, obtained from socket.io server
    url: '' // Location of socket.io server
},

// Optional libraries used to extend on reveal.js
dependencies: [
 { src: 'https://robojackets.github.io/reveal.js/plugin/notes/notes.js', async: true, condition: function() { return !!document.body.classList; } },
]
});
</script>
</body>
</html>
